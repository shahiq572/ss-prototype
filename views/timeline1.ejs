<!DOCTYPE html>
<html lang="en">

<head>
    <title>Timeline-demo</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/timeline/css/timeline.css" />
  
    <!-- Compiled and minified CSS -->
    <!-- <link rel="stylesheet" href="../assets/interface2/materialize/css/materialize.min.css"> -->
    <!-- Compiled and minified JavaScript -->
    <!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
    <script src="https://unpkg.com/scrollreveal@3.3.2/dist/scrollreveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>  
    <script src="../assets/timeline/js/timeline.js"></script>
</head>

<body>


<header>
    <div class="container">
      <!-- <h1>Timeline</h1> -->
      <!-- maybe add some padding to it to make it look like its centered -->

      <div class="search-container">
        <input type="search" id="search-input" value="Super Bowl Winners" placeholder="Search..." readonly>
        <button id="search-button">
            <img src="../assets/interface2/icons/search-icon.png" alt="search" class="search-icon">
        </button>
      </div>    

      <div class="info-panel row">
        <div class="col-2 p-1">
            <div class="row">
                <div class="col-12">
                    <img class="img img-fluid mx-auto d-block" src="https://picsum.photos/250">
                </div>
                <div class="col-12">
                    <h4 class="text-center">Title</h4>
                    <h6 class="text-center"><em>subtitle</em></h6>
                </div>
            </div>
        </div>
        <div class="col-7 mt-2">
            <p class="info-panel-maintext">
                In publishing and graphic design, Lorem ipsum is a placeholder text commonly used to demonstrate the visual form of a document or a typeface without relying on meaningful content. Lorem ipsum may be used as a placeholder before final copy is available.
            </p>
            <ul class="info-panel-metadata">
                <li><b>Meta-info 1: </b> sample data</li>
                <li><b>Meta-info 2: </b> sample data</li>
                <li><b>Meta-info 3: </b> sample data</li>
              </ul> 
        </div>
        <div class="col-3 info-panel-relatedsearch overflow-auto">
            <h5 class="mb-4">Related Search</h5>
            <div class="row row-cols-2 ">
                <div class="col">
                    <img class="img img-fluid rounded" src="https://picsum.photos/80">
                    <a href="https://picsum.photos/80"><em>Related 1</em></a>
                </div>
                <div class="col">
                    <img class="img img-fluid rounded" src="https://picsum.photos/80">
                    <a href="https://picsum.photos/80"><em>Related 2</em></a>
                </div>
                <div class="col">
                    <img class="img img-fluid rounded" src="https://picsum.photos/80">
                    <a href="https://picsum.photos/80"><em>Related 3</em></a>
                </div>
                <div class="col">
                    <img class="img img-fluid rounded" src="https://picsum.photos/80">
                    <a href="https://picsum.photos/80"><em>Related 4</em></a>
                </div>
                <!-- <div class="col">
                    <img class="img img-fluid rounded" src="https://picsum.photos/80">
                    <a href="https://picsum.photos/80"><em>Related 5</em></a>
                </div> -->
            </div>
        </div>
      </div>
    </div>
</header>

    <div class="timeline-title-sticky-container">
        <h2 class="timeline-title  mt-4">NFL Superbowl winner</h2>
        <button class="switch-view-btn mt-4" title="Open graph view" onclick="window.location.href='demo1'">
            Switch to Graph View
            <img src="../assets/interface2/icons/graph-4.png" alt="switch view" style="width: 40px; height: 37px; margin-left: 2px;"/>
        </button>
    </div>

<section class="timeline">
<div class="container">    
    <% var counter = 0; %>
    <% results.forEach(function(result) { %>
    <div class="timeline-item">
        <div class="timeline-img"></div>

        <div class="row p-3 timeline-content js--<%= counter % 2 === 0 ? 'fadeInLeft' : 'fadeInRight' %>">
            <div class="col-8">
                <h2><a class="timeline-item-title" href="<%= result.link %>" data-goal="<%= result.goal %>"><%= result.title %></a></h2>
            </div>
            <div class="col-4">
                <div class="date"><%= result.date ? result.date : new Date(result.timestamp * 1000).toLocaleDateString('en-US', {day:'numeric', month:'short', year:'numeric'}) %></div>
            </div>
            <div class="row m-2">
                <div class="col-12">
                    <p><%= result.body %></p>
                </div>
            </div>
            <!-- <a class="bnt-more" href="javascript:void(0)">More</a> -->
        </div>
    </div>
    <% counter++; %>
    <% }); %>

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content timeline-card js--fadeInRight">
        <div class="timeline-img-header">
        <h2>Card Title</h2>
        </div>
        <div class="date">25 MAY 2016</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>

    </div>   

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content js--fadeInLeft">
        <div class="date">3 JUN 2016</div>
        <h2>Quote</h2>
        <blockquote>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dicta explicabo debitis omnis dolor iste fugit totam quasi inventore!</blockquote>
    </div>
    </div>   

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content js--fadeInRight">
        <h2>Title</h2>
        <div class="date">22 JUN 2016</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>
    </div>   

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content timeline-card js--fadeInLeft">
        <div class="timeline-img-header">
        <h2>Card Title</h2>
        </div>
        <div class="date">10 JULY 2016</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>
    </div>   

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content timeline-card js--fadeInRight">
        <div class="timeline-img-header">
        <h2>Card Title</h2>
        </div>
        <div class="date">30 JULY 2016</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>
    </div>  

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content js--fadeInLeft">
        <div class="date">5 AUG 2016</div>
        <h2>Quote</h2>
        <blockquote>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dicta explicabo debitis omnis dolor iste fugit totam quasi inventore!</blockquote>
    </div>
    </div>   

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content timeline-card js--fadeInRight">
        <div class="timeline-img-header">
        <h2>Card Title</h2>
        </div>
        <div class="date">19 AUG 2016</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>
    </div>  

    <div class="timeline-item">

    <div class="timeline-img"></div>

    <div class="timeline-content js--fadeInLeft">
        <div class="date">1 SEP 2016</div>
        <h2>Title</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Maxime ipsa ratione omnis alias cupiditate saepe atque totam aperiam sed nulla voluptatem recusandae dolor, nostrum excepturi amet in dolores. Alias, ullam.</p>
        <a class="bnt-more" href="javascript:void(0)">More</a>
    </div>
    </div>   



</div>
</section>

<script>

    clickCount = 0
    // Time attribute when user started navigating the page
    if (sessionStorage.getItem("timestart") === null ) {
        sessionStorage.setItem("timestart", window.performance.timing.navigationStart);
    }

    if (sessionStorage.getItem("clickCounter") === null ) {
        sessionStorage.setItem("clickCounter", 0);
    } else {
        clickCount = sessionStorage.getItem("clickCounter");
    }

    

    // Get all the anchor tags in the document
    const links = document.getElementsByTagName('a');
    
    // Attach a click event listener to each anchor tag
    for (let i = 0; i < links.length; i++) {
      links[i].addEventListener('click', function(event) {
        // Check if the goal attribute is true
        const isGoal = event.target.getAttribute('data-goal') === 'true';
        
          // Stop the default redirect behavior of the anchor tag
          event.preventDefault();
          
          clickCount++;
          sessionStorage.setItem("clickCounter", clickCount);

        if (isGoal) {
          // Show the alert message with the total time
          const timeTaken = Date.now() - sessionStorage.getItem("timestart");
          alert('Answer found! Total time taken: ' + timeTaken/1000 + 's' + ' and total clicks: ' + clickCount);

          sessionStorage.removeItem("clickCounter");
          sessionStorage.removeItem("timestart");
          clickCount  = 0;
          sessionStorage.setItem("timestart", Date.now());

          const data = {
                name: "demotask_timeline",
                clickCount: clickCount,
                timeTaken: timeTaken/1000
            };

          fetch('/save-results', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        }
      });
    }
  </script>
  
</body>

</html>